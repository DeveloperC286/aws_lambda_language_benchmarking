nodejs-aws-formatting:
  stage: formatting
  image: node
  before_script:
    - npm -g install js-beautify
  script:
    - cd nodejs/aws/
    - for i in $( du -a "./src/" | awk '{print $2}' | grep -i "[.]js$" ); do
    - echo "$i"
    - js-beautify "$i" > "temp.txt"
    - cmp "$i" "temp.txt" || ( echo "$i needs formatted." && exit 1 )
    - done
  rules:
    - if: $CI_MERGE_REQUEST_ID


nodejs-aws-linting:
  stage: linting
  image: node
  before_script:
    - npm -g install eslint
  script:
    - cd nodejs/aws/
    - eslint ./src/
  rules:
    - if: $CI_MERGE_REQUEST_ID
